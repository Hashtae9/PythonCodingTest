# ë©´ì ‘ 2ì¼ì°¨

## 1. ìë°”ì˜ final í‚¤ì›Œë“œê°€ ì ìš©ë˜ëŠ” ì„¸ê°€ì§€ ê²½ìš°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”

+ ë³€ìˆ˜(variable), ë©”ì„œë“œ(method), í´ë˜ìŠ¤(class)ì— ì‚¬ìš©ê°€ëŠ¥
+ ë¬´ì–¸ê°€ë¥¼ ì œí•œí•œë‹¤ëŠ” ì˜ë¯¸ë¥¼ ê³µí†µì ìœ¼ë¡œ ê°€ì§



### final + ë³€ìˆ˜

+ í•´ë‹¹ ë³€ìˆ˜ëŠ” ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸
  (ê¸°ë³¸í˜• ë³€ìˆ˜ë¼ë©´ ê°’ì„ ë³€ê²½í•˜ì§€ ëª»í•˜ê³  ì°¸ì¡°í˜• ë³€ìˆ˜ë¼ë©´ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ë¥¼ ë³€ê²½í•˜ì§€ ëª»í•˜ëŠ” ê²ƒ)
+ ì´ˆê¸°í™”ê°’ì€ í•„ìˆ˜ì 
+ ê°ì²´ì•ˆì˜ ë³€ìˆ˜ë¼ë©´ ìƒì„±ì, static ë¸”ëŸ­ì„ í†µí•œ ì´ˆê¸°í™”ê¹Œì§€ëŠ” í—ˆìš©
+ í´ë˜ìŠ¤ì˜ ë©¤ë²„ ë³€ìˆ˜ì— finalì„ ì‚¬ìš©í•  ë•ŒëŠ” í´ë˜ìŠ¤ì˜ ìƒì„±ìì—ì„œ ì´ˆê¸°í™”



### final arguments(ì¸ì)

+ ì¸ìë¥¼ ì„ ì–¸í•  ë•Œ final í‚¤ì›Œë“œ
+ finalë¡œ ì„ ì–¸ëœ ì¸ìëŠ” ë©”ì†Œë“œ ë‚´ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥

```
public void func(final int number) {
    System.out.println(number);

    // number = 10;  compile error!
}
```





### final + í´ë˜ìŠ¤

+ í´ë˜ìŠ¤ì— finalì„ ë¶™ì´ë©´ ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ìƒì†í•  ìˆ˜ ì—†ëŠ” í´ë˜ìŠ¤

```
final class AAA {
    final String hello;
    AAA() {
        hello = "hello world";
    }
}

class BBB extends AAA() { // compile error!
}
```



### final + ë©”ì„œë“œ

+ final ë©”ì†Œë“œëŠ” Overrideê°€ ì•ˆë˜ë„ë¡ ë§Œë“¦

```
class AAA {
    final String hello = "hello world";

    final String getHello() {
        return hello;
    }
}

class BBB extends AAA {

    @Override
    String getHello() { // compile error !
        return "See you around";
    }
}
```



### ì •ë¦¬

- final variables, arguments : ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ë§Œë“¦
- final class : í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì§€ ëª»í•˜ë„ë¡ ë§Œë“¦
- final method : ë©”ì†Œë“œê°€ ì˜¤ë²„ë¼ì´ë“œë˜ì§€ ëª»í•˜ë„ë¡ ë§Œë“¦



## 2. finalí‚¤ì›Œë“œì™€ finally, finalizeì˜ ì°¨ì´ì ì„ ë§í•´ì£¼ì„¸ìš”

### final í‚¤ì›Œë“œ

+ í´ë˜ìŠ¤, ë©”ì†Œë“œ, ë³€ìˆ˜, ì¸ìë¥¼ ì„ ì–¸í•  ë•Œ í•¨ê»˜ ì‚¬ìš©
+ ê³µí†µì ìœ¼ë¡œ ê°ê°ì˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ë ¤ëŠ” íŠ¹ì§•



### finally í‚¤ì›Œë“œ

+ `try-catch`ì™€ í•¨ê»˜ ì‚¬ìš©
+ `try-catch`ê°€ ì¢…ë£Œë  ë•Œ finally blockì´ í•­ìƒ ìˆ˜í–‰
+ catchê°€ ì—†ë”ë¼ë„ finally ë¶€ë¶„ì€ ì¶œë ¥

```
try {
  System.out.println("try block");
  throw new Exception();
} catch (Exception e) {
  System.out.println("catch block");
} finally {
  System.out.println("finally block");
}

//ì¶œë ¥ê²°ê³¼
try block
catch block
finally block
```



### finalize í‚¤ì›Œë“œ

+ Object í´ë˜ìŠ¤ì— ì„ ì–¸ëœ protected ë©”ì†Œë“œ
+ Javaì—ì„œ ëª¨ë“  í´ë˜ìŠ¤ëŠ” Object í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ê°ì²´ëŠ” `finalize()` ë©”ì†Œë“œë¥¼ ê°–ê³  ìˆìŒ
+ Garbage collectorê°€ ì–´ë–¤ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê°ì²´ê°€ ì—†ë‹¤ê³  ìƒê°ë˜ë©´, í•´ë‹¹ ê°ì²´ë¥¼ ì†Œë©¸ì‹œí‚¤ëŠ”ë° ê°ì²´ë¥¼ ì†Œë©¸ì‹œí‚¬ ë•Œ `finalize()` ë©”ì†Œë“œë¥¼ í˜¸ì¶œ

```
package java.lang;

public class Object {
  ...

  protected void finalize() throws Throwable { }
}
```

ğŸ‘‰ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ `finalize()`ë¥¼ ì˜¤ë²„ë¼ì´ë“œ ê°€ëŠ¥

>  `finalize()`ëŠ” ì†Œë©¸ë  ë•Œ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ì–´ë–¤ ìì›ì„ í•¨ê»˜ ì†Œë©¸í•´ì£¼ë„ë¡ êµ¬í˜„
>
> ë©”ì†Œë“œ í˜¸ì¶œ ì‹œì ì´ Garbage collectorì— ì˜ì¡´ì ì´ê¸° ë•Œë¬¸ì—, ìƒê°í–ˆë˜ íƒ€ì´ë°ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆê¸°ì— finalizeë¥¼ ì¬ì •ì˜í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŒ



## 3. ìë°” api ì •ë ¬ì—ì„œ Arrays.sort()ëŠ” ì–´ë–¤ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ë‚˜ìš”? ìµœì•…ì˜ ê²½ìš° ì‹œê°„ë³µì¡ë„ëŠ”? Arrays.sort()ì˜ ëŒ€ì•ˆì€?

<img src="https://user-images.githubusercontent.com/101400894/212088127-5fce4e27-f992-48d8-ab21-c7370952b067.png" alt="image" style="zoom:67%;" align="left"/>

[ì •ë ¬ ì‹œê°„ë³µì¡ë„ ë° ì°¸ì¡° ì§€ì—­ì„±](https://d2.naver.com/helloworld/0315536)

[ê¸°ë³¸ ì •ë ¬ 1(ë²„ë¸”, ì„ íƒ, ì‚½ì…)](https://bangu4.tistory.com/206)

[ê¸°ë³¸ ì •ë ¬ 2(í€µ, ë¨¸ì§€, í™)](https://bangu4.tistory.com/207)

[Tim Sort](https://st-lab.tistory.com/276)



### **Arrays.sort() : DualPivotQuicksort**

Arrays.sort()ì˜ ë©”ì„œë“œë¥¼ í´ë¦­í–ˆì„ ë•Œë¥¼ ë³´ë©´

```
public static void sort(int[] a){
	DualPivotQuicksort.sort(a, 0, 0, a.length);
}
```

+ Arrays.sort()ëŠ” ë“€ì–¼ í”¼ë´‡ í€µì •ë ¬ì„ ì±„íƒ
+ ë“€ì–¼ í”¼ë´‡ í€µì†ŒíŠ¸ëŠ” í‰ê·  **O(nlog(n))**ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§€ë©° ìµœì•…ì˜ ê²½ìš° **O(n^2)**ì´ ë  ìˆ˜ ìˆë‹¤.



### Collection.sort() : Timsort

+ Timsort()ë¼ëŠ” ì •ë ¬ê¸°ë²•ì„ ì‚¬ìš© (ì‚½ì… ì •ë ¬ê³¼ í•©ë³‘ì •ë ¬ì„ ê²°í•©í•˜ì—¬ ë§Œë“  ì •ë ¬)
+ Timsortì˜ ì‹œê°„ë³µì¡ë„ëŠ” í‰ê·  **O(n log(n))** ì´ë©° ìµœì•…ì˜ ê²½ìš°ë„ **O(n log(n))**



### ğŸ’ JAVA ì •ë ¬ API

#### 	Arrays.sort()

> fromIndex ì—ì„œ toIndexê¹Œì§€ ì§€ì •í•  ìˆ˜ ìˆë‹¤. 
>
> ì•„ë˜ì˜ ì˜ˆì œëŠ” 0ë²ˆì§¸ ì¸ë±ìŠ¤ì—ì„œ 2ë²ˆì§¸ê¹Œì§€(3ë²ˆì§¸ëŠ” exclusiveë¼ ë¯¸ í¬í•¨ì„) ê°’ë“¤ì„ ì •ë ¬

```
int[] ints = {5, 4, 2, 1, 3};
// 1) ê¸°ë³¸ ì •ë ¬
Arrays.sort(ints); // [1,2,3,4,5]

// 2) íŠ¹ì • ì¸ë±ìŠ¤ ì •ë ¬
Arrays.sort(ints, 0, 3); // [2,4,5,1,3]
```



#### Collections.sort()

> Collectionì„ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì•¼ í•¨

```
// 1) ë‹¨ìˆœ String ì •ë ¬
List<String> list = Arrays.asList("betty", "andrew", "robert");
Collections.sort(list); // [andrew, betty, robert] ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ë‚˜ì˜¨ë‹¤.


// 2) ìœ„ì˜ ë°°ì—´ ì˜ˆì œ
int[] ints = {5, 4, 2, 1, 3};
// ì¼ë‹¨ Arrayë¥¼ Collectionìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•œë‹¤. 
List<Integer> intList = Arrays.stream(getInts()).boxed().collect(Collectors.toList());
Collections.sort(intList);
```



#### Streamì˜ sortë¥¼ Lamda ì‹ìœ¼ë¡œ ì‚¬ìš©

```
List<String> list = Arrays.asList("betty", "andrew", "robert");

// ìŠ¤íŠ¸ë¦¼ì˜ ì¤‘ê°„ë©”ì„œë“œ sorted()ì— Compartorë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸´ë‹¤.
List<String> result = list.stream().sorted(String::compareTo).collect(Collectors.toList()); //[andrew, betty, robert]
```



#### Comparator

> `comparing()` ê³¼ `thenComparing()`ë©”ì„œë“œ

```
@Getter
@Setter
@ToString
public class User {
    private String name;
    private Integer age;
  // ...ìƒì„±ì
}

public static List<User> getUsers() {
  User user = new User("andrew", 32);
  User user1 = new User("betty", 24); 
  User user2 = new User("robert", 40);
  User user3 = new User("andy", 24);
  return Arrays.asList(user, user1, user2, user3);
}
```



##### Comparing()

```
List<User> users = getUsers();

List<User> result = users
  .stream()
  .sorted(Comparator.comparing(User::getAge))
  .collect(Collectors.toList());
```



##### thenComparing()

> thenComparing()ì€ ì•ì—ì„œ ë™ì¼í•œ ì¡°ê±´ì¸ ê²½ìš°ì— ê·¸ ë‹¤ìŒì—ëŠ” ë­˜ë¡œ ë¹„êµí• ë˜?ë¥¼ ë¬»ëŠ” í•¨ìˆ˜

```
List<User> result1 = users
  .stream()
  .sorted(Comparator.comparing(User::getAge).thenComparing(User::getName))
  .collect(Collectors.toList());
```





## 4. ìë°” optionalì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”

[Optional](https://mangkyu.tistory.com/70)

[Optional ì‚¬ìš©ê°€ì´ë“œ](https://mangkyu.tistory.com/203)



### NPE(**NullPointerException**)

```
List<String> names = getNames();
names.sort(); // namesê°€ nullì´ë¼ë©´ NPEê°€ ë°œìƒí•¨

List<String> names = getNames();
// NPEë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ null ê²€ì‚¬ë¥¼ í•´ì•¼í•¨
if(names != null){
    names.sort();
}
```



### Optional

> Optional<T> í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ NPEë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤. 
>
> Optional<T>ëŠ” nullì´ ì˜¬ ìˆ˜ ìˆëŠ” ê°’ì„ ê°ì‹¸ëŠ” Wrapper í´ë˜ìŠ¤

+ **Optionalì€ ë©”ì†Œë“œì˜ ê²°ê³¼ê°€ nullì´ ë  ìˆ˜ ìˆìœ¼ë©°, nullì— ì˜í•´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ì„ ë•Œ ë°˜í™˜ê°’ìœ¼ë¡œë§Œ ì‚¬ìš©**

```
public final class Optional<T> {

    private static final Optional<?> EMPTY = new Optional<>();
    private final T value;
    
    private Optional() {
        this.value = null;
    }
    
    public T orElse(T other) {
        return value != null ? value : other;
    }

    public T orElseGet(Supplier<? extends T> other) {
        return value != null ? value : other.get();
    }

    ...

}
```



### Optional í™œìš©

#### Optional.empty() - ê°’ì´ Nullì¸ ê²½ìš°

> Optionalì€ Wrapper í´ë˜ìŠ¤ì´ê¸° ë•Œë¬¸ì— ê°’ì´ ì—†ì„ ìˆ˜ë„ ìˆëŠ”ë°, ì´ë•ŒëŠ” Optional.empty()ë¡œ ìƒì„±
>
> Optional í´ë˜ìŠ¤ëŠ” ë‚´ë¶€ì—ì„œ static ë³€ìˆ˜ë¡œ EMPTY ê°ì²´ë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ì„œ ê°€ì§€ê³  ìˆìŒ
>
> > ë¹ˆ ê°ì²´ë¥¼ ì—¬ëŸ¬ ë²ˆ ìƒì„±í•´ì¤˜ì•¼ í•˜ëŠ” ê²½ìš°ì—ë„ 1ê°œì˜ EMPTY ê°ì²´ë¥¼ ê³µìœ í•¨ìœ¼ë¡œì¨ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½

```
Optional<String> optional = Optional.empty();

System.out.println(optional); // Optional.empty
System.out.println(optional.isPresent()); // false
```



#### **Optional.of() -** ê°’ì´ Nullì´ ì•„ë‹Œ ê²½ìš°

> ì–´ë–¤ ë°ì´í„°ê°€ ì ˆëŒ€ nullì´ ì•„ë‹ˆë¼ë©´ Optional.of()ë¡œ ìƒì„±
>
> Optional.of()ë¡œ Nullì„ ì €ì¥í•˜ë ¤ê³  í•˜ë©´ NullPointerExceptionì´ ë°œìƒ

```
// Optionalì˜ valueëŠ” ì ˆëŒ€ nullì´ ì•„ë‹ˆë‹¤.
Optional<String> optional = Optional.of("MyName");
```





#### Optional.ofNullable() - ê°’ì´ Nullì¼ìˆ˜ë„ ì•„ë‹ìˆ˜ë„ ìˆëŠ” ê²½ìš°

> ì–´ë–¤ ë°ì´í„°ê°€ nullì´ ì˜¬ ìˆ˜ë„ ìˆê³  ì•„ë‹ ìˆ˜ë„ ìˆëŠ” ê²½ìš°ì—ëŠ” Optional.ofNullbaleë¡œ ìƒì„±
>
> ì´í›„ì— orElse ë˜ëŠ” orElseGet ë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ ê°’ì´ ì—†ëŠ” ê²½ìš°ë¼ë„ ì•ˆì „í•˜ê²Œ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ

```
// Optionalì˜ valueëŠ” ê°’ì´ ìˆì„ ìˆ˜ë„ ìˆê³  null ì¼ ìˆ˜ë„ ìˆë‹¤.
Optional<String> optional = Optional.ofNullable(getName());
String name = optional.orElse("anonymous"); // ê°’ì´ ì—†ë‹¤ë©´ "anonymous" ë¥¼ ë¦¬í„´
```



#### **orElseì™€ orElseGetì˜ ì°¨ì´**

Optional APIì˜ ë‹¨ë§ ì—°ì‚°ì—ëŠ” orElseì™€ orElseGet í•¨ìˆ˜ê°€ ìˆë‹¤. ë¹„ìŠ·í•´ ë³´ì´ëŠ” ë‘ í•¨ìˆ˜ëŠ” ì—„ì²­ë‚œ ì°¨ì´ê°€ ìˆë‹¤.

orElseë¡œëŠ” ê°’ì´, orElseGetë¡œëŠ” í•¨ìˆ˜ê°€ ë„˜ì–´ê°„ë‹¤ëŠ” ê²ƒì€ ìƒë‹¹íˆ í° ì°¨ì´

- orElse: íŒŒë¼ë¯¸í„°ë¡œ ê°’ì„ ë°›ëŠ”ë‹¤.
- orElseGet: íŒŒë¼ë¯¸í„°ë¡œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤(í•¨ìˆ˜)ë¥¼ ë°›ëŠ”ë‹¤.





ğŸ“ŒOptional ì‚¬ìš© ì˜ˆì‹œ

```
public String findPostCode() {
    UserVO userVO = getUser();
    if (userVO != null) {
        Address address = user.getAddress();
        if (address != null) {
            String postCode = address.getPostCode();
            if (postCode != null) {
                return postCode;
            }
        }
    }
    return "ìš°í¸ë²ˆí˜¸ ì—†ìŒ";
}

public String findPostCode() {
    // ìœ„ì˜ ì½”ë“œë¥¼ Optionalë¡œ í¼ì³ë†“ìœ¼ë©´ ì•„ë˜ì™€ ê°™ë‹¤.
    Optional<UserVO> userVO = Optional.ofNullable(getUser());
    Optional<Address> address = userVO.map(UserVO::getAddress);
    Optional<String> postCode = address.map(Address::getPostCode);
    String result = postCode.orElse("ìš°í¸ë²ˆí˜¸ ì—†ìŒ");

    // ê·¸ë¦¬ê³  ìœ„ì˜ ì½”ë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì¶•ì•½í•´ì„œ ì“¸ ìˆ˜ ìˆë‹¤.
    String result = user.map(UserVO::getAddress)
        .map(Address::getPostCode)
        .orElse("ìš°í¸ë²ˆí˜¸ ì—†ìŒ");
}
```







## 5. ìë°” staticí‚¤ì›Œë“œì˜ ìƒì„±ì‹œê¸°ì™€ ì†Œë©¸ì‹œê¸°ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”

ğŸ“Œ**Static**

> Staticì´ë¼ëŠ” í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Staticë³€ìˆ˜ì™€ Staticë©”ì†Œë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ”ë° ë‹¤ë¥¸ë§ë¡œ ì •ì í•„ë“œì™€ ì •ì  ë©”ì†Œë“œë¼ê³ ë„ í•˜ë©° ì´ ë‘˜ì„ í•©ì³ ì •ì  ë©¤ë²„
>
> ì •ì ë©¤ë²„ë“¤ì€ Heapì˜ì—­ì´ ì•„ë‹Œ Staticì˜ì—­ì— í• ë‹¹
>
> > Static ì˜ì—­ì— í• ë‹¹ëœ ë©”ëª¨ë¦¬ëŠ” ëª¨ë“  ê°ì²´ê°€ ê³µìœ í•˜ì—¬ í•˜ë‚˜ì˜ ë©¤ë²„ë¥¼ ì–´ë””ì„œë“ ì§€ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì¥ì ì„ ê°€ì§€ì§€ë§Œ Garbage Collectorì˜ ê´€ë¦¬ ì˜ì—­ ë°–ì— ì¡´ì¬í•˜ê¸°ì— Staticì˜ì—­ì— ìˆëŠ” ë©¤ë²„ë“¤ì€ í”„ë¡œê·¸ë¨ì˜ ì¢…ë£Œì‹œê¹Œì§€ ë©”ëª¨ë¦¬ê°€ í• ë‹¹ëœ ì±„ë¡œ ì¡´ì¬

+ `static` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì´ ì•„ë‹Œ Class Loader ê°€ í´ë˜ìŠ¤ë¥¼ Load í•  ë•Œ Data ì˜ì—­ì— ë©”ëª¨ë¦¬ê°€ í• ë‹¹ë˜ê²Œ ëœë‹¤.
+ ì´ ì˜ì—­ì€ ê°™ì€ ìœ í˜•ì˜ í´ë˜ìŠ¤ë§ˆë‹¤ ê³µìœ ë˜ë©° Process ê°€ ì¢…ë£Œë˜ëŠ” ì‹œì ì—ì„œ í•´ì œë˜ë¯€ë¡œ `static` í‚¤ì›Œë“œì˜ ìƒëª…ì£¼ê¸° ì—­ì‹œ Class Load ì‹œ ìƒì„±ë˜ê³  Process ì¢…ë£Œ ì‹œ í•´ì œë˜ê²Œ ëœë‹¤.
+ ë¡œë“œëœ í´ë˜ìŠ¤ë¼ê³  í•¨ì€, JVMì˜ í´ë˜ìŠ¤ ë¡œë”ì—ì„œ í´ë˜ìŠ¤ íŒŒì¼ì— ëŒ€í•œ ë¡œë”©ì„ ì™„ë£Œí•œ í›„, í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì •ë³´ë¥¼ ë‹´ì€ **Class íƒ€ì…ì˜ ê°ì²´**ë¥¼ ìƒì„±í•˜ì—¬ ë©”ëª¨ë¦¬ì˜ í™ ì˜ì—­ì— ì €ì¥í•´ ë‘” ê²ƒì„ ì˜ë¯¸(new í‚¤ì›Œë“œë¥¼ í†µí•´ ë§Œë“œëŠ” ê°ì²´ì™€ëŠ” ë‹¤ë¥¸ ê²ƒì„ì„ ìœ ì˜)





## 6. ìë°”ì˜ ê°ì²´ ë¦¬í”Œë ‰ì…˜ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”.

[ë¦¬í”Œë ‰ì…˜](https://steady-coding.tistory.com/609)

[Class<T>](https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html)

> **êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ íƒ€ì…ì„ ì•Œì§€ ëª»í•´ë„ ê·¸ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ, íƒ€ì…, ë³€ìˆ˜ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ìë°” API**



### Reflection?

+ í™ ì˜ì—­ì— ë¡œë“œëœ Class íƒ€ì…ì˜ ê°ì²´ë¥¼ í†µí•´, ì›í•˜ëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³ , ì¸ìŠ¤í„´ìŠ¤ì˜ í•„ë“œì™€ ë©”ì†Œë“œë¥¼ ì ‘ê·¼ ì œì–´ìì™€ ìƒê´€ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” API

 

#### ì‚¬ìš©ì‹œê¸°

> ë³€ìˆ˜ ê°’ì„ ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì‚¬ìš©í•´ì•¼ í•˜ê±°ë‚˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ê³  ìƒì„±ë˜ëŠ” í´ë˜ìŠ¤
>
> ìŠ¤í”„ë§ì´ ë¦¬í”Œë ‰ì…˜ì„ ì´ìš©í•˜ì—¬ *ëŸ°íƒ€ì„ ì‹œì—* ê°œë°œìê°€ ë“±ë¡í•œ ë¹ˆì„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°€ì ¸ì™€ ì‚¬ìš©
>
> - ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬: DIì— ì‚¬ìš©
> - MVC: Viewì—ì„œ ë„˜ì–´ì˜¤ëŠ” ë°ì´í„°ë¥¼ ê°ì²´ì— ë°”ì¸ë”©í•  ë•Œ ì‚¬ìš©
> - Hibernate: @Entity í´ë˜ìŠ¤ì— setterê°€ ì—†ìœ¼ë©´ í•´ë‹¹ í•„ë“œì— ê°’ì„ ë°”ë¡œ ì£¼ì…
> - JUnit: ì•„ì˜ˆ ReflectionUtils ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ì •ì˜í•˜ì—¬ ì‚¬ìš©



####  ì˜ì—­ì— ë¡œë“œëœ í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²• 3ê°€ì§€

+ `í´ë˜ìŠ¤.class` ë¡œ ê°€ì ¸ì˜¤ê¸°
+ `ì¸ìŠ¤í„´ìŠ¤.getClass()` ë¡œ ê°€ì ¸ì˜¤ê¸°
+ `Class.forName("í´ë˜ìŠ¤ëª…")` ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°

```
public class Member {

    private String name;

    protected int age;

    public String hobby;

    public Member() {
    }

    public Member(String name, int age, String hobby) {
        this.name = name;
        this.age = age;
        this.hobby = hobby;
    }

    public void speak(String message) {
        System.out.println(message);
    }

    private void secret() {
        System.out.println("ë¹„ë°€ë²ˆí˜¸ëŠ” 1234ì…ë‹ˆë‹¤.");
    }

    @Override
    public String toString() {
        return "Member{" +
            "name='" + name + '\'' +
            ", age=" + age +
            ", hobby='" + hobby + '\'' +
            '}';
    }
}

public class Main {

    public static void main(String[] args) throws ClassNotFoundException {
        Class<Member> memberClass = Member.class;
        System.out.println(System.identityHashCode(memberClass));

        Member member = new Member("ì œì´ì˜¨", 23, "ë‹¤ë¼ì“° ê°œë°œ");
        Class<? extends Member> memberClass2 = member.getClass();
        System.out.println(System.identityHashCode(memberClass2));

        Class<?> memberClass3 = Class.forName("{íŒ¨í‚¤ì§€ëª…}.Member");
        System.out.println(System.identityHashCode(memberClass3));
    }
}

// ì‹¤í–‰ ê²°ê³¼
1740000325
1740000325
1740000325
```



### Reflection ì‹¤ìŠµ

+ Person í´ë˜ìŠ¤

```
class Person {
    int age;

    Person() {
        this.age = 27;
    }

    Person(int age) {
        this.age = age;
    }

    int getAge() {
        return this.age;
    }
}
```



+ Class ì°¾ê¸°

> ìœ„ì—ì„œ ì–¸ê¸‰í•œ í´ë˜ìŠ¤ ì°¾ê¸° 3ê°€ì§€ ì¤‘ í•˜ë‚˜

```
Class clazz = Class.forName("Person")
```





+ ìƒì„±ì ì°¾ê¸°

```
Class clazz = Class.forName("Person");
Constructor constructor = clazz.getDeclaredConstructor();


//getDeclaredConstructor() : ì¸ì ì—†ëŠ” ìƒì„±ìë¥¼ ê°€ì ¸ì˜´
//getConstructor()ë„ ìƒì„±ìë¥¼ ì–»ì–´ì˜´
```



+ Method ì°¾ê¸°

> invoke() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ Method ê°ì²´ë¥¼ ì‹¤í–‰

```
Class clazz = Person.class;
Method[] methods = clazz.getDeclaredMethods();    
System.out.println(methods[0].invoke(clazz.newInstance())) // 27ì´ ì¶œë ¥ë¨
```



+ í•„ë“œ ê°€ì ¸ì˜¤ê¸°

> set() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ê°ì²´ì˜ ë³€ìˆ˜ë¥¼ ë³€ê²½

```
Class clazz = Person.class;
Field[] field = clazz.getDeclaredFields();

Person person = new Person();
field[0].set(person, 17);
System.out.println(field[0].get(person));  // 17ì´ ì¶œë ¥ë¨ 
```





### ë¦¬í”Œë ‰ì…˜ì˜ ì¥ë‹¨ì 

+ ì¥ì 
  - ëŸ°íƒ€ì„ ì‹œì ì—ì„œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ì ‘ê·¼ ì œì–´ìì™€ ê´€ê³„ ì—†ì´ í•„ë“œì™€ ë©”ì†Œë“œì— ì ‘ê·¼í•˜ì—¬ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ìœ ì—°ì„±ì„ ê°€ì§€ê³  ìˆë‹¤.
+ ë‹¨ì 
  - ìº¡ìŠí™”ë¥¼ ì €í•´í•œë‹¤.
  - ëŸ°íƒ€ì„ ì‹œì ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë¯€ë¡œ ì»´íŒŒì¼ ì‹œì ì—ì„œ í•´ë‹¹ íƒ€ì…ì„ ì²´í¬í•  ìˆ˜ ì—†ë‹¤.
  - ëŸ°íƒ€ì„ ì‹œì ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë¯€ë¡œ êµ¬ì²´ì ì¸ ë™ì‘ íë¦„ì„ íŒŒì•…í•˜ê¸° ì–´ë µë‹¤.
  - ë‹¨ìˆœíˆ í•„ë“œ ë° ë©”ì†Œë“œë¥¼ ì ‘ê·¼í•  ë•Œë³´ë‹¤ ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•  ë•Œ ì„±ëŠ¥ì´ ëŠë¦¬ë‹¤. (ëª¨ë“  ìƒí™©ì—ì„œ ì„±ëŠ¥ì´ ëŠë¦¬ì§€ëŠ” ì•ŠìŒ.)

 



**ğŸ“Œë¦¬í”Œë ‰ì…˜ ì£¼ì˜ì **

ë¦¬í”Œë ‰ì…˜ APIë¥¼ í†µí•´ ëŸ°íƒ€ì„ ì¤‘, í´ë˜ìŠ¤ ì •ë³´ì— ì ‘ê·¼í•˜ì—¬ í´ë˜ìŠ¤ë¥¼ ì›í•˜ëŠ” ëŒ€ë¡œ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤. ì‹¬ì§€ì–´ private ì ‘ê·¼ ì œì–´ìë¡œ ì„ ì–¸í•œ í•„ë“œë‚˜ ë©”ì†Œë“œê¹Œì§€ ì¡°ì‘ì´ ê°€ëŠ¥í•˜ë‹¤. ê°ì²´ ì§€í–¥ ì„¤ê³„ì—ì„œ ì¤‘ìš”í•œ ìº¡ìŠí™”ê°€ ê¹¨ì§€ë¯€ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆ ë  ê¸°ìˆ ì²˜ëŸ¼ ë³´ì¸ë‹¤.

ê·œëª¨ê°€ ì‘ì€ ì½˜ì†” ë‹¨ê³„ì—ì„œëŠ” ê°œë°œìê°€ ì¶©ë¶„íˆ ì»´íŒŒì¼ ì‹œì ì— í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©ë  ê°ì²´ì™€ ì˜ì¡´ ê´€ê³„ë¥¼ ëª¨ë‘ íŒŒì•…í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ í”„ë ˆì„ì›Œí¬ì™€ ê°™ì´ í° ê·œëª¨ì˜ ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” ìˆ˜ë§ì€ ê°ì²´ì™€ ì˜ì¡´ ê´€ê³„ë¥¼ íŒŒì•…í•˜ê¸° ì–´ë µë‹¤. ì´ë•Œ ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•˜ë©´ ë™ì ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ë§ºì–´ì¤„ ìˆ˜ ìˆë‹¤.



**ğŸ“ŒSpringì—ì„œ ë¦¬í”Œë ‰ì…˜**

Springì˜ Bean Factoryë¥¼ ë³´ë©´, @Controller, @Service, @Repository ë“±ì˜ ì–´ë…¸í…Œì´ì…˜ë§Œ ë¶™ì´ë©´ Bean Factoryì—ì„œ ì•Œì•„ì„œ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•´ ì£¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ê°œë°œìëŠ” Bean Factoryì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì•Œë ¤ì¤€ ì ì´ ì—†ëŠ”ë°, ì´ê²ƒì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” ë°”ë¡œ ë¦¬í”Œë ‰ì…˜ ë•ë¶„ì´ë‹¤. ëŸ°íƒ€ì„ì— í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ íƒìƒ‰í•˜ê³  ë°œê²¬í•œë‹¤ë©´, ë¦¬í”Œë ‰ì…˜ì„ í†µí•´ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ í•„ë“œë¥¼ ì£¼ì…í•˜ì—¬ Bean Factoryì— ì €ì¥í•˜ëŠ” ì‹ìœ¼ë¡œ ì‚¬ìš©ì´ ëœë‹¤.





### ìŠ¤í”„ë§ì—ì„œì˜ Reflection : DI

> ìŠ¤í”„ë§ìœ¼ë¡œ ê°œë°œì„ í•  ë•Œ, ìš°ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Serviceì™€ Repositoryë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³ 
> Serviceì— *@Autowired* ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ Repositoryë¥¼ ì£¼ì…
>
> >  DI(Dependency Injection) ì¦‰, ì˜ì¡´ì„± ì£¼ì…

[Spring DI with Reflection](https://velog.io/@suyeon-jin/%EB%A6%AC%ED%94%8C%EB%A0%89%EC%85%98-%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%98-DI%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EA%B1%B8%EA%B9%8C)
